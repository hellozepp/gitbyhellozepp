<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        body{
            margin: 0;padding: 0;
        }
    </style>
    <title>Title</title>
    <script>
        function show(){
            document.getElementById("boxhidden").style.visibility='visible';
        }
        function submit(){
            document.getElementById("login").submit();
        }
        function changeImg() {
            var shijanchuo =new Date().getTime();//获取毫秒值
//            alert(shijanchuo);
            var image = document.getElementById("changeImg1");
            image.src="/ServletCheck?"+shijanchuo;
//            alert(image.src);
        }

    </script>
    <script lang="javascript">
        function ajaxFunction()
        {
            var xmlHttp;
            try
            {
                // Firefox, Opera 8.0+, Safari
                xmlHttp=new XMLHttpRequest();
            }
            catch (e)
            {
                // Internet Explorer
                try
                {
                    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch (e)
                {
                    try
                    {
                        xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch (e)
                    {
                        alert("您的浏览器不支持AJAX！");
                        return false;
                    }
                }
            }
            //2.注册回调函数
            xmlHttp.onreadystatechange=function()
            {
                if(xmlHttp.readyState==4&&xmlHttp.status==200)
                {   //5.在回调函数中处理数据
                    var s=xmlHttp.responseText;
                    if(s.valueOf()=="ok")
                            window.location="http://www.apache.org";
//                            document.write("ok");
                    else{
                        document.getElementById("info").innerHTML=s;
                        }
                }
            }
            //3.设置请求和url
            var userName=document.getElementById("userName").value;
            var password=document.getElementById("password").value;

//            xmlHttp.open("post","http://localhost:8080/yemian");
            xmlHttp.open("post","http://localhost:8080/yemian?userName="+userName+"&password="+password);
            xmlHttp.setRequestHeader("content-type","application/x-www-form-urlencoded");
            //4.发送请求
//            xmlHttp.send("userName="+userName+"&password="+password);
            xmlHttp.send();
        }
    </script>
</head>
<body>
<!--<form enctype="application/x-www-form-urlencoded"-->
    <div style="text-align: center;">
        <button style="width:200px;height:100px;font-size:18px;margin-top: 20%;" onclick="show()">登录</button>
    </div >

    <div id="boxhidden" style="width:100%;height:100%;top:0;background:rgba(0,0,0,0.5);visibility:hidden;position:absolute;text-align: center"  >
    <div style="width:500px;height:370px;background-color:#ffffff;position:absolute;left: 0 ;right: 0;margin: 0 auto;top:20%" >
    <table >
        <tr>
            <td >用户名:</td>
            <td><input type="text" id="userName" ><br></td>
        </tr>
        <tr>
            <td>密&nbsp;&nbsp;码:</td>
            <td><input type="password" id="password"><br><br></td>
        </tr>

        <tr>
            <td>验证码:</td>
            <td><input type="text"></td>
            <td><img id="changeImg1"  src="/ServletCheck"><a style="font-size:9px;" href="#" onclick="changeImg()">看不清,换一张试试..</a></td>
        </tr>
        <tr>
            <td>   <input type="button" id="login" onclick="ajaxFunction()" value="登录"></td>
            <td><input type="button" value="取消" onclick="hidden1()"></td>
        </tr>
    </table>
        <h3 name="info" id="info" ></h3>
            <script>
                function hidden1(){
                    document.getElementById("boxhidden").style.visibility='hidden';
                }
            </script>

    </div>
    </div>
</body>
</html>