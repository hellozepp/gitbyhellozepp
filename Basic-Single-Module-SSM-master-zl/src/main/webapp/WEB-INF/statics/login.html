<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="apple-itunes-app" content="app-id=432274380">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="renderer" content="webkit"/>
    <meta name="description" content="江湖农场，你的专属农场，你值得拥有！！"/>
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
    <title>登录</title>

    <link rel="stylesheet" href="css/main.e87dad73.css">
    <link rel="stylesheet" href="css/select2.css">
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/login.js"></script>
    <script src="js/location.js"></script>
    <script src="js/area.js"></script>
    <script src="js/select2.js"></script>
    <script src="js/select2_locale_zh-CN.js"></script>

    <script src="js/date.js"></script>
    <script type="text/javascript">

    </script>
    <head>


<body class="zhi ">
<div class="index-main">
    <div class="index-main-body">
        <div class="index-header">
            <h1 class="">LakeFarm</h1>
            <h2 class="subtitle">相忘于江湖，相聚于农场</h2>
        </div>

        <div class="desk-front sign-flow clearfix sign-flow-simple">

            <div class="index-tab-navs">
                <div class="navs-slider">
                    <a href="#signup" class="active">注册</a>
                    <a href="#signin">登录</a>
                    <span class="navs-slider-bar"></span>
                </div>
            </div>


            <div class="view view-signin" data-za-module="SignInForm">
                <form method="POST">
                    <input type="hidden" name="_xsrf" value="fb15324eccd63e4c72aa9eaf0395133e"/>
                    <div class="group-inputs">

                        <div class="account input-wrapper">
                            <input type="text" name="account" aria-label="用户名" placeholder="用户名" id="username" required>
                        </div>
                        <div class="verification input-wrapper">
                            <input type="password" name="password" aria-label="密码" placeholder="密码" id="password"required />
                            <button type="button" class="send-code-button">获取验证码</button>
                        </div>

                        <div class="Captcha input-wrapper" data-type="cn" data-za-module="Captcha">
                            <div class="Captcha-operate">
                                <input type="hidden" name="captcha" required data-rule-required="true"
                                       data-msg-required="请点击图中所有倒立的文字">
                                <input type="hidden" name="captcha_type" value="cn" required>
                                <label class="Captcha-prompt">请点击图中所有倒立的文字</label>
                                <span class="Captcha-refresh js-refreshCaptcha sprite-index-icon-refresh"></span>
                            </div>
                            <div class="Captcha-imageConatiner">
                                <img class="Captcha-image" alt="验证码">
                            </div>
                        </div>

                    </div>
                    <div class="button-wrapper command">
                        <input class="sign-button submit" type="button" onclick="login()" value="登录"/>
                    </div>
                    <div class="signin-misc-wrapper clearfix">

                        <button type="button" class="signin-switch-button">手机验证码登录</button>

                        <a class="unable-login" href="#">无法登录？</a>
                    </div>

                    <div class="social-signup-wrapper" data-za-module="SNSSignIn">
                        <span class="name js-toggle-sns-buttons">社交帐号登录</span>

                        <div class="sns-buttons">
                            <a title="微信登录" class="js-bindwechat" href="#"><i class="sprite-index-icon-wechat"></i></a>
                            <a title="微博登录" class="js-bindweibo" href="#"><i class="sprite-index-icon-weibo"></i></a>
                            <a title="QQ 登录" class="js-bindqq" href="#"><i class="sprite-index-icon-qq"></i></a>
                        </div>


                    </div>

                </form>

                <div class="QRCode">
                    <button class="QRCode-toggleButton">
                        <span class="sprite-global-icon-qrcode"></span>
                        <span class="QRCode-toggleButtonText ">下载LakeFarm</span>
                    </button>
                    <div class="QRCode-card">
                        <div class="QRCode-image"></div>
                        <div class="sprite-index-icon-arrow"></div>
                    </div>
                </div>


            </div>
            <div class="view view-signup " style="display:block;" data-za-module="SignUpForm">
                <form name="form1" class="zu-side-login-box" id="sign-form-1" autocomplete="off"
                      method="POST">
                    <input type="password" hidden>
                    <input type="hidden" name="_xsrf" value="fb15324eccd63e4c72aa9eaf0395133e"/>
                    <div class="group-inputs">
                        <div class="name input-wrapper">
                            <input required type="text" name="fullname" aria-label="用户名" placeholder="用户名" id="uname"/>

                        </div>
                        <div class="email input-wrapper">
                            <input required type="text" class="account" name="phone_num" aria-label="手机号（仅支持中国大陆）"
                                   placeholder="手机号（仅支持中国大陆）" id="uphone">

                        </div>
                        <div class="input-wrapper" style="margin-bottom:-23px;">
                            <input required type="password" name="password" aria-label="密码" placeholder="密码（不少于 6 位）"
                                   autocomplete="off" id="upwd">
                        </div>
                        　　　　　　　　　　　　　　
                        <div class="input-wrapper">
                            <input required type="text" name="identity" aria-label="身份证号" placeholder="身份证号" id="uidcard">

                        </div>

                        <div class="input-wrapper paddingtb">
                            <label style="display:block;">所属区域</label>
                            <select id="loc_province" style="width:90px;">
                            </select>
                            <select id="loc_city" style="width:90px;">
                            </select>
                            <select id="loc_town" style="width:90px;">
                            </select>
                        </div>
                        <div class="input-wrapper paddingtb" >
                            <label>出生日期</label>
                            <select  name=year onchange="yearMonth(this.value)" class="select-commem-style" id="year">
                                <option value="">年</option>
                            </select>
                            <select name=month onchange="monthDay(this.value)"  class="select-commem-style" id="month">
                                <option value="">月</option>
                            </select>
                            <select name=day class="select-commem-style" id="day">
                                <option value="">日</option>
                            </select>
                        </div>
                        <div class="input-wrapper paddingtb ">
                            <label>所属类型</label>
                            <select id="u_type" class="select-commem-style" style="width:90px;">
                                <option>年轻才俊</option>
                                <option>江湖人士</option>
                            </select>
                        </div>
                        <div class="input-wrapper paddingtb" >
                             <textarea class="descriptionSelf" id="u_description">
　　　　　　　　　　　　　　　　　　　　自我描述信息
                            </textarea>
                        </div>
                    </div>


                    <div class="button-wrapper command">
                        <input class="sign-button submit" type="button" value="注册LakeFarm" onclick="register()"/>
                    </div>
                </form>

                <p class="agreement-tip">点击「注册」按钮，即代表你同意<a href="/terms" target="_blank">《使用协议》</a></p>

                <div class="QRCode">
                    <button class="QRCode-toggleButton">
                        <span class="sprite-global-icon-qrcode"></span>
                        <span class="QRCode-toggleButtonText ">下载LakeFarm</span>
                    </button>
                    <div class="QRCode-card">
                        <div class="QRCode-image"></div>
                        <div class="sprite-index-icon-arrow"></div>
                    </div>
                </div>


            </div>
        </div>
    </div>

</div>
<div class="footer">

    <span>&copy; 2017 LakeFarm</span>
    <span class="dot">·</span>
    <a target="_blank" href="/roundtable">知识圆桌</a>
    <span class="dot">·</span>
    <a target="_blank" href="/explore" data-za-c="explore" data-za-a="visit_explore"
       data-za-l="home_bottom_explore">发现</a>
    <span class="dot">·</span>
    <a target="_blank" href="/app">移动应用</a>
    <span class="dot">·</span>


    <a href="/org/signin" class="footer-mobile-show">使用机构帐号登录</a>

    <span class="dot footer-mobile-show">·</span>

    <a href="/contact" class="footer-mobile-show">联系我们</a>
    <span class="dot">·</span>
    <a target="_blank" href="/careers">了解LakeFarm</a>
    <br/>
    <a href="http://www.miibeian.gov.cn/" target="_blank">京 ICP 证 110745 号</a>
    <span class="dot">·</span>
    <span>京公网安备 11010802010035 号</span>
    <span class="dot">·</span>
    <a href="http://zhstatic.zhihu.com/assets/zhihu/publish-license.jpg" target="_blank">出版物经营许可证</a>

</div>
<script type="text/javascript">
    function login(){
        var username=$("#username").val();
        var password=$("#password").val();
        if(username==""||password==""){
            alert("用户名或密码不能为空！")
        }
        else {
            $.ajax({
                        type: "post",
                        url: "/lakeFarm/login.from?username=" + username + "&password=" + password + "",
                        dataType: "html",
                        success: function (msg) {
                            if(msg=="1"){
                                alert("登陆成功！");
                                window.location.href = "gameMapPage.html";
                            }
                            else if(msg=="0"){
                        alert("用户名或者密码错误！");
                    }
                },
                error:function(){
                    alert("用户名或者密码错误！");
                }
            });
        }
    }
    function register() {
        var username = $("#uname").val().trim();
        var password = $("#upwd").val().trim();
        var phone = $("#uphone").val().trim();
        var idCard = $("#uidcard").val().trim();
        var u_type = $("#u_type option:selected").val().trim();
        var description = $("#u_description").html().trim();
        var area = $("#select2-chosen-1").html().trim() + "-" + $("#select2-chosen-2").html().trim() + "-" + $("#select2-chosen-3").html().trim()
        var birthday = $("#year option:selected").val().trim() + "-" + $("#month option:selected").val().trim() + "-" + $("#day option:selected").val().trim();
//        alert(username+" "+password+" "+phone+" "+idCard+" "+u_type+" "+description.trim()+" "+area+" "+birthday)
        if (username == "" || password == "" || phone == "" || idCard == "" || u_type == "" || description == "" || area == "" || birthday == "") {
            alert("请正确填写信息！");
        }
        else {
            var user="{"+username+"@"+password+"@"+phone+"@"+idCard+"@"+u_type+"@"+description+"@"+area+"@"+birthday+"}";
//            alert(user);
            $.ajax({
                type: "post",
                url: "/lakeFarm/register.from?user=" + user + "",
                dataType: "html",
                success: function (msg) {
                    if(msg=="1"){
                        alert(msg);
                        alert("注册成功，开启你的农场时光");
                        window.location.reload();
                    }
                    else{
                        alert("请重新填写信息!");
                    }
                }
            })
        }
    }
</script>

<input type="hidden" name="_xsrf" value="fb15324eccd63e4c72aa9eaf0395133e"/>
</body>
</html></html>
