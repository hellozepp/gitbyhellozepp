<!DOCTYPE html>
<html lang="zh-CN">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>注册-StuCommunity</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/stu.js" type="text/javascript"></script>
<script src="./js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
//	function getVerifyCode(){
//		var btn=$(".verifyCode");
//
//		var emailRecipients=$(".email").val();
//
//		var _data="emailRecipients="+emailRecipients;
//
//		$.ajax({
//			type:"get",
//			url:"/sendVerifyEmail",
//			data:_data,
//			dataType:"json",
//			success:function(data){
//				$.each(data, function(key, value) {
//					if(key=="code" && value==0){
//						settime(btn);
//					}
//				}
//				);
//
//			}
//		});
//	}
//
//	var countdown=60;
//	function settime(val) {
//	if (countdown == 0) {
//	val.attr("disabled", false);
//	val.val("重新发送");
//	val.css({
//	"background":"#1E90FF"
//	});
//	countdown = 60;
//	return false;
//	} else {
//	val.attr("disabled", true);
//	val.val("正在获取"+countdown);
//	val.css({
//	"background":"#ccc"
//	});
//	countdown--;
//	}
//	setTimeout(function() {
//	settime(val)
//	},1000)
//
$(document).ready(function(){
	var url="http://localhost:8081"
	$('#register').click(
			function(){
				var  username=$('#username').val();
				var  password_1=$('#password_1').val();
				var  password_2=$('#password_2').val();
				var  name=$('#name').val();
				if(username.trim()!=""&&password_1.trim()!=""){
					if(password_1!=password_2) {alert("输入密码不一致!")}
					else {
//						var data =JSON.stringify({"username":username,"password":password_1,"name":name});
						$.ajax({
							type:"post",
							url:url+"/register",
							dataType:"html",//发送给服务的类型
							data:{'username':username,'password':password_1,'name':name},
							success: function (result) {
								if(result=="1"){
								alert("添加用户成功！");
								window.location="user/index.html";}
								else alert("该用户已存在！");
							}
						})
					}

				}
				else {
					alert("用户名密码不能为空");
				}
			}
	)

});
</script>

<body>

<div class="register-container">
	<h1>StuCommunity</h1>
	
	<div class="connect">
		<p>欢迎您的加入</p>
	</div>
	
	<form method="get" id="registerForm">
		<div>
			<input id="name" type="text" name="nickname" class="username" placeholder="您的名称" autocomplete="off"/>
		</div>
		<div>
			<input id ="username" type="text" name="nickname" class="username" placeholder="您的学号" autocomplete="off"/>
				<!--<input type="email" name="email" class="email" placeholder="输入邮箱地址" oncontextmenu="return false" onpaste="return false" />	-->
		</div>
		<div style="height: 69px;">
			<input id="checkCode" type="text" class="test"  name="verifycode" placeholder="验证码" />
			<img id ="code" class="code" src="/val" onclick="ref()" tel="验证码"/>
			<!--<input type="button" class="verifyCode" type="button" onclick="getVerifyCode()" value="输入验证码"/>，-->
		</div>
		<div>
			<input id="password_1"  type="password" onclick="checkCodeRes()" name="password" class="password" placeholder="输入密码" oncontextmenu="return false" onpaste="return false" />
		</div>
		<div>
			<input id ="password_2" type="password" name="confirm_password" class="confirm_password" placeholder="再次输入密码" oncontextmenu="return false" onpaste="return false" />
		</div>
		
		

		<input id="register" type="button" style="cursor:pointer;width:300px;height:44px;margin-top:25px;padding:0;  background: rgba(6, 127, 228, 0.71);-moz-border-radius:6px;-webkit-border-radius:6px;border-radius:6px;border:0;-moz-box-shadow:0 15px 30px 0 rgba(255,255,255,.25) inset,0 2px 7px 0 rgba(0,0,0,.2);font-family:"Microsoft YaHei",Helvetica,Arial,sans-serif;font-size:14px;font-weight:700;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.1);-o-transition:all .2s;-moz-transition:all .2s;-webkit-transition:all .2s;-ms-transition:all .2s" value="注 册" />
	</form>
	
	<a href="login.html">
		<button type="button" class="register-tis">已经有账号？</button>
	</a>

</div>

</body>
<script src="./js/common.js"></script>
<!--背景图片自动更换-->
<script src="./js/supersized.3.2.7.min.js"></script>
<script src="./js/supersized-init.js"></script>
<!--表单验证-->
<script src="./js/jquery.validate.min.js"></script>
</html>